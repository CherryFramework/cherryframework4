!function(e){var t={init:function(t){var a={offset:!0};return this.each(function(){function n(){u.accordion({header:"> div > h3",collapsible:!0,active:!1,animate:300,icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"},heightStyle:"content"}).sortable({handle:"h3",placeholder:"ui-state-highlight",connectWith:".accordion-unit",beforeStop:function(t,a){all_group=e(a.item).parent(),e(".group",all_group).each(function(){index=e(this).index(),e(".key-position",this).val(index+1)})},receive:function(t,a){new_area=e(a.item).parent().parent().data("area"),e(".key-area",a.item).val(new_area)},start:function(t,a){var n=e(a.item).parent().parent().data("area");e(".area-unit:not([data-area="+n+"])",s).addClass("drag-target")},stop:function(t,a){a.item.children("h3").triggerHandler("focusout"),e(".area-unit",s).removeClass("drag-target")}}),r()}function r(){e(".delete-group",s).on("click",function(){return i(e(this)),!1}),e(".add-rule-button",s).on("click",function(){return o(e(this)),!1}),e(".remove-rule-button",s).on("click",function(){return c(e(this)),!1}),e(".rule-major-select",s).on("change",function(){l(e(this),e(this).val())})}function i(t){var a=t.parent().parent(),n=jQuery(a).clone();a.slideUp(300,function(){t.off("click"),e(this).remove(),d.prepend(n),e(".key-area",n).val(m),e(".delete-group",n).on("click",function(){return i(e(this)),!1}),n.slideUp(0).slideDown(300),u.accordion("refresh")})}function o(t){{var a,n=t.parents(".conditions"),r=e(".conditions-rules",n),i=e(".dublicate-item",n),o=i.clone(),s=i.data("name");i.data("name")}o.removeClass("dublicate-item"),o.addClass("rule-item"),r.append(o),a=e(".rule-item",r),0!==a.length&&n.removeClass("empty"),majorAttrName=s+"["+(a.length-1)+"][major]",minorAttrName=s+"["+(a.length-1)+"][minor]",e("select.rule-major-select",o).attr({name:majorAttrName}),e("select.rule-minor-select",o).html(""),e("select.rule-minor-select",o).attr({name:minorAttrName}),e("select.rule-major-select",o).on("change",function(){l(e(this),e(this).val())}),e(".remove-rule-button",o).on("click",function(){return c(e(this)),!1})}function c(t){var a=t.parent(),n=t.parents(".conditions"),r=t.parents(".conditions-rules");e("select.rule-major-select",a).off("change"),e(".remove-rule-button",a).off("click"),a.remove(),e(".rule-item",r).each(function(t){majorAttrName=e(this).data("name")+"["+t+"][major]",minorAttrName=e(this).data("name")+"["+t+"][minor]",e("select.rule-major-select",this).attr({name:majorAttrName}),e("select.rule-minor-select",this).attr({name:minorAttrName})}),0==e(".rule-item",r).length&&n.addClass("empty")}function l(e,t){var a={action:"get_minor_select",major_type:t},n=e.parents(".rule-item").find(".rule-minor-select");return h=jQuery.ajax({type:"POST",url:ajaxurl,data:a,cache:!1,beforeSend:function(){n.attr({disabled:"disabled"}),n.addClass("loading-state"),n.html("")},success:function(e){n.removeAttr("disabled"),n.removeClass("loading-state"),n.append(e)},dataType:"html"}),!1}t&&e.extend(a,t);var s=e(this),u=(e(".add-new-btn",s),e(".accordion-unit",s)),d=(e(".group",s),e(".available-statics .accordion-unit",s)),m=e(".available-statics",s).data("area"),h=(s.data("name"),null);n()})},destroy:function(){},update:function(){}};e.fn.cherryStaticEditor=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(e.error("Method with name "+a+" is not exist for jQuery.cherryAccordion"),void 0):t.init.apply(this,arguments)}}(jQuery);