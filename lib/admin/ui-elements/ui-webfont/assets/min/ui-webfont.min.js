!function(e){"use strict";CHERRY_API.utilites.namespace("ui_elements.webfont"),CHERRY_API.ui_elements.webfont={ajaxRequest:null,ajaxRequestSuccess:!0,init:function(e){var t=this;CHERRY_API.status.document_ready?t.render(e):CHERRY_API.variable.$document.on("ready",t.render(e))},render:function(t){function n(t){var n=t.parents(".cherry-ui-webfont-wrap"),s=e(".new-font-select",n),i=s.val();a.ajaxAddFontItem(n,i)}var a=this,s=e(".cherry-ui-webfont-wrap",t),i=e(".add-button",s),o=e(".new-font-select",s);0!==s.length&&(i.on("click",function(){a.fontExitsCheck(o)||a.ajaxRequestSuccess&&n(o)}),s.on("click",".remove-button",function(){a.removeFontItem(e(this))}))},fontExitsCheck:function(t){var n=t.parents(".cherry-ui-webfont-wrap"),a=e(".new-font-select",n),s=e(".font-list .font-item input.font-family",n),i=a.val(),o=!1;return s.each(function(){if(e(this).val()==i){var t,n=e(this).parents(".font-item");n.hasClass("shake-effect")||(n.addClass("shake-effect"),clearTimeout(t),t=setTimeout(function(){n.removeClass("shake-effect")},3e3)),o=!0}}),o},ajaxAddFontItem:function(t){var n=e(".add-button",t),a=e(".new-font-select",t),s=e(".font-list",t),i=e(".font-item",s).length,o=a.val(),u=t.data("id"),c=t.data("name"),r={action:"get_fonts_variants_subsets",font:o,id:u,name:c,font_item_length:i};null==this.ajaxRequest||this.ajaxRequestSuccess||this.ajaxRequest.abort(),this.ajaxRequest=e.ajax({type:"POST",url:ajaxurl,data:r,cache:!1,beforeSend:function(){this.ajaxRequestSuccess=!1,n.addClass("loading")},success:function(t){this.ajaxRequestSuccess=!0,n.removeClass("loading"),s.prepend(t),setTimeout(function(){e(".font-item",s).eq(0).removeClass("add-item-effect")},1e3),CHERRY_API.ui_elements.select.init(s)},dataType:"html"})},removeFontItem:function(t){{var n=t.parents(".font-item");e(".inner",n)}n.remove()}},e(window).on("cherry-ui-elements-init",function(e,t){CHERRY_API.ui_elements.webfont.init(t.target)})}(jQuery);