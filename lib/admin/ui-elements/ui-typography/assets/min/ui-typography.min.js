!function(e){"use strict";CHERRY_API.utilites.namespace("ui_elements.typography"),CHERRY_API.ui_elements.typography={init:function(e){var t=this;CHERRY_API.status.document_ready?t.render(e):CHERRY_API.variable.$document.on("ready",t.render(e))},render:function(t){function r(t,r){var n=e(t).parents(".cherry-ui-typography-wrap:first"),c=e(".cherry-font-preview",n),s=e(".cherry-font-family",n).val(),o=e(".cherry-font-style",n).val(),l=(e(".cherry-font-character",n).val(),e(".font-size .cherry-ui-stepper-input",n).val()),h=e(".font-lineheight .cherry-ui-stepper-input",n).val(),f=e(".font-letterspacing .cherry-ui-stepper-input",n).val(),y=e(".cherry-text-align",n).val(),p=e(".cherry-color-picker",n).val(),u=e(".font-type",n).val();"web"==u?(e(".field-font-character",n).css({display:"block"}),r&&a(t)):e(".field-font-character",n).css({display:"none"}),c.css({display:"block"}),c.css({"font-family":s+", sans-serif"}),-1!==o.indexOf("italic")?(c.css({"font-style":"italic"}),o=o.replace("italic","")):c.css({"font-style":"normal"}),c.css({"font-weight":o}),c.css({"font-size":l+"px"}),c.css({"line-height":h+"px"}),c.css({"letter-spacing":f+"px"}),c.css({"text-align":y}),c.css({color:p}),c.css({"background-color":i(p)})}function a(t){var r=e(t).parents(".cherry-ui-typography-wrap:first"),a=e(".cherry-font-family",r).val(),n=e(".cherry-font-style",r).val(),c=e(".cherry-font-character",r).val(),s={family:a,style:n,character:c};o(s,r)}function n(t){var r=t.parents(".cherry-ui-typography-wrap"),a=t.find(":selected"),n=a.data("style").split(","),i=a.data("character").split(","),o=e(".cherry-font-character option",r),l=e(".cherry-font-style option",r),h=e(".cherry-font-category",r),f=c(t);e(".font-type",r).val(f),"web"==f?e(".field-font-character",y).css({display:"block"}):e(".field-font-character",y).css({display:"none"}),h.val(a.data("category")),l.each(function(){s(e(this),n,"style")}),o.each(function(){s(e(this),i,"character")})}function c(e){var t=e.find(":selected"),r=t.parents("optgroup:first");return r.data("font-type")}function s(t,r){-1==e.inArray(t.val(),r)?t.removeAttr("selected").attr("disabled","disabled").css({display:"none"}):t.removeAttr("disabled").css({display:"block"})}function i(e){var t="#222222";if(""!==e){e=e.replace("#","");var r=parseInt(e.substr(0,2),16),a=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),c=(299*r+587*a+114*n)/1e3;t=c>=128?"#222222":"#ffffff"}return t}function o(t,r){var a={action:"get_google_font_link",font_data:t},n=(e(".cherry-font-preview",r),t.family.replace(" ","-")+t.style+t.character+".css");h=e.ajax({type:"POST",url:ajaxurl,data:a,cache:!1,beforeSend:function(){f=!1},success:function(t){f=!0,-1==e.inArray(n,CHERRY_API.variable.loaded_assets.style)&&(CHERRY_API.variable.loaded_assets.style.push(n),e("head").append(e("<link rel='stylesheet' href='"+t+"' type='text/css' media='all'>")))},dataType:"html"})}var l=e(".cherry-ui-typography-wrap",t),h=null,f=!0;0!==l.length&&(e(".cherry-font-family",l).each(function(){n(e(this)),r(e(this),!0)}),e(".cherry-font-family",l).on("change",function(){n(e(this)),r(e(this),!0)}),e(".cherry-font-style",l).on("change",function(){r(e(this),!0)}),e(".cherry-font-character",l).on("change",function(){r(e(this),!1)}),e(".font-size .cherry-ui-stepper-input",l).on("change",function(){r(e(this),!1)}),e(".font-lineheight .cherry-ui-stepper-input",l).on("change",function(){r(e(this),!1)}),e(".font-letterspacing .cherry-ui-stepper-input",l).on("change",function(){r(e(this),!1)}),e(".cherry-text-align",l).on("change",function(){r(e(this),!1)}),e(".cherry-color-picker",l).wpColorPicker({change:function(){r(e(this),!1)}}));var y=0}}}(jQuery);