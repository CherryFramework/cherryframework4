!function(e){"use strict";CHERRY_API.utilites.namespace("ui_elements.typography"),CHERRY_API.ui_elements.typography={init:function(e){var t=this;CHERRY_API.status.document_ready?t.render(e):CHERRY_API.variable.$document.on("ready",t.render(e))},render:function(t){function r(t,r){var a=e(t).parents(".cherry-ui-typography-wrap:first"),c=e(".cherry-font-preview",a),i=e(".cherry-font-family",a).val(),o=e(".cherry-font-style",a).val(),l=(e(".cherry-font-character",a).val(),e(".font-size .cherry-ui-stepper-input",a).val()),h=e(".font-lineheight .cherry-ui-stepper-input",a).val(),f=e(".font-letterspacing .cherry-ui-stepper-input",a).val(),y=e(".cherry-text-align",a).val(),p=e(".cherry-color-picker",a).val(),u=e(".font-type",a).val();"web"==u?(e(".field-font-character",a).css({display:"block"}),r&&n(t)):e(".field-font-character",a).css({display:"none"}),c.css({display:"block"}),c.css({"font-family":i+", sans-serif"}),-1!==o.indexOf("italic")?(c.css({"font-style":"italic"}),o=o.replace("italic","")):c.css({"font-style":"normal"}),c.css({"font-weight":o}),c.css({"font-size":l+"px"}),c.css({"line-height":h+"px"}),c.css({"letter-spacing":f+"px"}),c.css({"text-align":y}),c.css({color:p}),c.css({"background-color":s(p)})}function n(t){var r=e(t).parents(".cherry-ui-typography-wrap:first"),n=e(".cherry-font-family",r).val(),a=e(".cherry-font-style",r).val(),c=e(".cherry-font-character",r).val(),i={family:n,style:a,character:c};o(i,r)}function a(t){var r=t.parents(".cherry-ui-typography-wrap"),n=t.find(":selected"),a=n.data("style").split(","),s=n.data("character").split(","),o=e(".cherry-font-character option",r),f=e(".cherry-font-style option",r),y=e(".cherry-font-category",r),p=c(t);e(".font-type",r).val(p),"web"==p?e(".field-font-character",u).css({display:"block"}):e(".field-font-character",u).css({display:"none"}),l=!1,h=!1,y.val(n.data("category")),f.each(function(){i(e(this),a,"style")}),o.each(function(){i(e(this),s,"character")})}function c(e){var t=e.find(":selected"),r=t.parents("optgroup:first");return r.data("font-type")}function i(t,r,n){-1==e.inArray(t.val(),r)?t.removeAttr("selected").attr("disabled","disabled").css({display:"none"}):(t.removeAttr("selected").removeAttr("disabled").css({display:"block"}),"style"!=n||h||(t.attr("selected","selected"),h=!0),"character"!=n||l||(t.attr("selected","selected"),l=!0))}function s(e){var t="#222222";if(""!==e){e=e.replace("#","");var r=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),c=(299*r+587*n+114*a)/1e3;t=c>=128?"#222222":"#ffffff"}return t}function o(t,r){{var n={action:"get_google_font_link",font_data:t};e(".cherry-font-preview",r)}y=e.ajax({type:"POST",url:ajaxurl,data:n,cache:!1,beforeSend:function(){p=!1},success:function(t){p=!0,e("head").append(e("<link rel='stylesheet' href='"+t+"' type='text/css' media='all'>"))},dataType:"html"})}var l,h,f=e(".cherry-ui-typography-wrap",t),y=null,p=!0;0!==f.length&&(e(".cherry-font-family",f).each(function(){a(e(this)),r(e(this),!0)}),e(".cherry-font-family",f).on("change",function(){a(e(this)),r(e(this),!0)}),e(".cherry-font-style",f).on("change",function(){r(e(this),!0)}),e(".cherry-font-character",f).on("change",function(){r(e(this),!1)}),e(".font-size .cherry-ui-stepper-input",f).on("change",function(){r(e(this),!1)}),e(".font-lineheight .cherry-ui-stepper-input",f).on("change",function(){r(e(this),!1)}),e(".font-letterspacing .cherry-ui-stepper-input",f).on("change",function(){r(e(this),!1)}),e(".cherry-text-align",f).on("change",function(){r(e(this),!1)}),e(".cherry-color-picker",f).wpColorPicker({change:function(){r(e(this),!1)}}));var u=0}}}(jQuery);